(this.webpackJsonpspotlist=this.webpackJsonpspotlist||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(23)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),c=a.n(s),i=(a(15),a(2)),o=a(3),l=a(1),u=a(5),h=a(4),p=(a(16),a(17),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={term:""},n.handleTermChange=n.handleTermChange.bind(Object(l.a)(n)),n.handleSearch=n.handleSearch.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"handleSearch",value:function(){this.props.onSearch(this.state.term)}},{key:"render",value:function(){return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("input",{onChange:this.handleTermChange,placeholder:"Enter A Song, Album, or Artist"}),r.a.createElement("button",{onClick:this.handleSearch,className:"SearchButton"},"SEARCH"))}}]),a}(r.a.Component)),m=(a(18),a(19),a(20),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).addTrack=n.addTrack.bind(Object(l.a)(n)),n.removeTrack=n.removeTrack.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"renderAction",value:function(){return this.props.isRemoval?r.a.createElement("button",{className:"Track-action remove",onClick:this.removeTrack},"-"):r.a.createElement("button",{className:"Track-action add",onClick:this.addTrack},"+")}},{key:"addTrack",value:function(){this.props.onAdd(this.props.track)}},{key:"removeTrack",value:function(){this.props.onRemove(this.props.track)}},{key:"render",value:function(){return r.a.createElement("div",{className:"Track"},r.a.createElement("div",{className:"Track-information"},r.a.createElement("h3",null,this.props.track.name),r.a.createElement("p",null,this.props.track.artist," | ",this.props.track.album)),this.renderAction())}}]),a}(r.a.Component)),d=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"TrackList"},this.props.tracks.map((function(t){return r.a.createElement(m,{key:t.id,track:t,onAdd:e.props.onAdd,onRemove:e.props.onRemove,isRemoval:e.props.isRemoval})})))}}]),a}(r.a.Component),v=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"SearchResults"},r.a.createElement("h2",{className:"SearchResults-title"},"Results"),r.a.createElement(d,{tracks:this.props.searchResults,onAdd:this.props.onAdd,isRemoval:!1}))}}]),a}(r.a.Component),k=(a(21),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleNameChange=n.handleNameChange.bind(Object(l.a)(n)),n.handleSave=n.handleSave.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"handleNameChange",value:function(e){this.props.onNameChange(e.target.value)}},{key:"handleSave",value:function(){this.props.onSave()}},{key:"render",value:function(){return r.a.createElement("div",{className:"Playlist"},r.a.createElement("input",{onChange:this.handleNameChange,placeholder:"New Playlist"}),r.a.createElement(d,{tracks:this.props.tracks,onRemove:this.props.onRemove,isRemoval:!0}),r.a.createElement("button",{onClick:this.handleSave,className:"Playlist-save"},"SAVE TO SPOTIFY"))}}]),a}(r.a.Component)),f=a(6),b=a.n(f),y=a(7),T={accessToken:"",getAccessToken:function(){var e=this;if(this.acessToken)return this.acessToken;var t=window.location.href.match(/access_token=([^&]*)/),a=window.location.href.match(/expires_in=([^&]*)/);if(t&&a){this.acessToken=t[1];var n=a[1];return window.setTimeout((function(){return e.acessToken=""}),1e3*n),window.history.pushState("Access Token",null,"/"),this.acessToken}window.location="https://accounts.spotify.com/authorize?client_id=".concat("e9dbde275cbf4de3964c6f674e6d59f3","&redirect_uri=").concat("https://jonathan-sapatieri.github.io/spotlist/","&response_type=token")},search:function(e){var t=this;return Object(y.a)(b.a.mark((function a(){var n;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("".concat("https://api.spotify.com/v1","/search?type=track&q=").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.getAccessToken()}});case 3:return n=a.sent,a.next=6,n.json();case 6:return n=a.sent,a.abrupt("return",n.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}})));case 10:return a.prev=10,a.t0=a.catch(0),console.log(a.t0.message),a.abrupt("return",[]);case 14:case 15:case"end":return a.stop()}}),a,null,[[0,10]])})))()},savePlaylist:function(e,t){var a=this;return Object(y.a)(b.a.mark((function n(){var r,s,c,i,o,l;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t){n.next=2;break}return n.abrupt("return");case 2:return r=a.getAccessToken(),s={Authorization:"Bearer "+r},c="",i="",n.next=8,fetch("https://api.spotify.com/v1/me",{headers:s});case 8:return o=n.sent,n.next=11,o.json();case 11:return o=n.sent,c=o.id,n.next=15,fetch("https://api.spotify.com/v1/users/".concat(c,"/playlists"),{headers:s,method:"POST",body:JSON.stringify({name:e})});case 15:return l=n.sent,n.next=18,l.json();case 18:return l=n.sent,i=l.id,n.next=22,fetch("https://api.spotify.com/v1/playlists/".concat(i,"/tracks"),{headers:s,method:"POST",body:JSON.stringify({uris:t})});case 22:case"end":return n.stop()}}),n)})))()}},O=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={searchResults:[],playlistName:"",playlistTracks:[]},n.search=n.search.bind(Object(l.a)(n)),n.updatePlaylistName=n.updatePlaylistName.bind(Object(l.a)(n)),n.addTrack=n.addTrack.bind(Object(l.a)(n)),n.removeTrack=n.removeTrack.bind(Object(l.a)(n)),n.savePlaylist=n.savePlaylist.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"search",value:function(e){var t=this;T.search(e).then((function(e){t.setState({searchResults:e})}))}},{key:"updatePlaylistName",value:function(e){this.setState({playlistName:e})}},{key:"addTrack",value:function(e){var t=this.state.playlistTracks;t.find((function(t){return t.id===e.id}))||(t.push(e),this.setState({playlistTracks:t}))}},{key:"removeTrack",value:function(e){var t=this.state.playlistTracks.filter((function(t){return t.id!==e.id}));this.setState({playlistTracks:t})}},{key:"savePlaylist",value:function(){var e=this,t=this.state.playlistTracks.map((function(e){return e.uri}));T.savePlaylist(this.state.playlistName,t).then((function(){e.setState({playlistName:"New Playlist",playlistTracks:[]})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"App-title"},"Spotlist"),r.a.createElement(p,{onSearch:this.search}),r.a.createElement("div",{className:"App-playlist"},r.a.createElement(v,{searchResults:this.state.searchResults,onAdd:this.addTrack}),r.a.createElement(k,{playlistName:this.state.playlistName,tracks:this.state.playlistTracks,onNameChange:this.updatePlaylistName,onRemove:this.removeTrack,onSave:this.savePlaylist})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.8b80cc0c.chunk.js.map